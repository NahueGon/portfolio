---
export interface Props {
    title: string
    counterStart: number
    counterEnd: number
}

const { title, counterStart, counterEnd } = Astro.props;
---

<div class="flex">
    <span class="text-2xl "> + </span>
    <span class="text-blue-600 dark:text-sky-500/90 font-bold text-4xl" id=`contador-${ title }`
        data-counter-start={ counterStart } 
        data-counter-end={ counterEnd }
        data-title={ title }
    >
        { counterStart }
    </span>
</div>

<script>
    const counterElements = document.querySelectorAll('[data-title]');
    const counterElement = 0;

    counterElements.forEach( counterElement => {
    
        const counterStart = parseInt(counterElement.getAttribute('data-counter-start'), 10);
        const counterEnd = parseInt(counterElement.getAttribute('data-counter-end'), 10);

        let counter = counterStart;

        let delay = 200;

        function updateCounter() {
            if (counter < counterEnd) {
                counter++;
                counterElement.innerText = counter;

                delay *= .7;
                setTimeout(updateCounter, delay);

            }
        }

        setTimeout(updateCounter, delay);

    } )

</script>
